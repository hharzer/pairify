!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).ScopeBracket=e()}}((function(){return function e(t,n,o){function r(l,s){if(!n[l]){if(!t[l]){var c="function"==typeof require&&require;if(!s&&c)return c(l,!0);if(i)return i(l,!0);var u=new Error("Cannot find module '"+l+"'");throw u.code="MODULE_NOT_FOUND",u}var f=n[l]={exports:{}};t[l][0].call(f.exports,(function(e){return r(t[l][1][e]||e)}),f,f.exports,e,t,n,o)}return n[l].exports}for(var i="function"==typeof require&&require,l=0;l<o.length;l++)r(o[l]);return r}({1:[function(e,t,n){const o=[{type:"comment-single-line",start:"//",end:"\n ",category:"comment"},{type:"comment-block",start:"/*",end:"*/",category:"comment"}].concat([{type:"single-quotes",start:"'",end:"'",category:"string"},{type:"double-quotes",start:'"',end:'"',category:"string"},{type:"template-literal",start:"`",end:"`",category:"string"}],[{type:"round",start:"(",end:")",category:"block"},{type:"curly",start:"{",end:"}",category:"block"},{type:"square",start:"[",end:"]",category:"block"},{type:"angle",start:"<",end:">",category:"block"}]);function r(e,t,n){return{token:e,line:t,position:n}}function i(e,t,n){return{type:e,from:[t.line,t.position],to:[n.line,n.position]}}t.exports={analyze:function(e){let t=1,n=[],l=[],s=o.reduce((e,t)=>(e[t.start]=t,e),{}),c=o.reduce((e,t)=>(e[t.end]=t,e),{}),u=0;for(let o=0;o<e.length;o++){const f=e[o],p=e[o+1],a=s[f]||s[f+p]||null,y=c[f]||c[f+p]||null;if("\n"===f){for(let e=n.length-1;e>=0;e--)if("comment-single-line"===n[e].token.type){const o=n[e];n.splice(e),l.push(i("comment-single-line",{line:o.line,position:o.position},{line:t,position:u+1}));break}t+=1,u=0}else if(u+=1,n.length>0)if(y){let e=!1,o=!1;for(let r=n.length-1;r>=0;r--)if("comment"!==n[r].token.category&&"string"!==n[r].token.category||(o=!0),y.type===n[r].token.type){if(e=!0,"block"===y.category&&o)break;const s=n[r];n.splice(r),l.push(i(y.type,{line:s.line,position:s.position},{line:t,position:u+y.end.length}));break}e||null===a||n.push(r(a,t,u))}else null!==a&&n.push(r(a,t,u));else null!==a&&n.push(r(a,t,u))}return l}}},{}]},{},[1])(1)}));